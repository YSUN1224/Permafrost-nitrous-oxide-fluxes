We will co-assembly the two samples using megahit as it is much faster. You can also replace --megahit with --metaspades to use metaspades as the assembler. Metaspades has better performance, but it takes very long for large datasets. You can also run megahit or metaspapdes on your own without using metawrap command. Metawrap assembly here does two steps: 1. assembly with megahit; 2. contig quality evaluation using quast.

emacs assembly_megahit.sh
#!/bin/bash
#SBATCH -J assembly_megahit
#SBATCH --nodes=1
#SBATCH --ntasks-per-node=12
#SBATCH --partition=bigmem
#SBATCH --time=0-10:00:00
#SBATCH --error=assembly_megahit.e%J
#SBATCH --output=assembly_megahit.o%J
#SBATCH --mail-user=your_email_address
#SBATCH --mail-type=ALL
conda activate metawrap-env
cat CLEAN_READS/ERR*_1.fastq > CLEAN_READS/ALL_READS_1.fastq # Concatinate the forward reads from all the samples for co-assembly
cat CLEAN_READS/ERR*_2.fastq > CLEAN_READS/ALL_READS_2.fastq # Concatinate the reverse reads from all the samples for co-assembly
metawrap assembly -1 CLEAN_READS/ALL_READS_1.fastq -2 CLEAN_READS/ALL_READS_2.fastq -m 300 -t 48 --megahit -o ASSEMBLY_megahit 
Submit the assembly job after move_rename_clean_reads is completed. The job should finish in ~15 min after job starts with 12 cores of bigmem node.

sbatch assembly_megahit.sh
Now let's have a look at the contig sequences. You will see that each contig name starts with ">". Press 'q' to quit viewing

less ASSEMBLY_megahit/final_assembly.fasta
If we want to get all the contig names, grep is useful for that.the first part 'grep ">" ASSEMBLY_megahit/final_assembly.fasta': extract the lines with ">" from the contig file; the second part '> contig_names.txt': save those lines into a file called contig_names.txt

grep ">" ASSEMBLY_megahit/final_assembly.fasta > contig_names.txt 

# if we want to count how many lines/contigs
grep ">" ASSEMBLY_megahit/final_assembly.fasta | wc -l
You can see all the contig names in this file.

less contig_names.txt
